cpu: intel

kernel:
  params: "acpi_os_name=\"Windows 2015\" msr.allow_writes=on intremap=no_x2apic_optout pci=realloc intel_iommu=off"
  modules: "i915 intel_lpss_pci thinkpad_acpi"

fonts:
  vconsole: ter-i18n

modules:
  blacklist:
    - "blacklist ideapad_laptop"
    - "blacklist pcspkr"
    - "blacklist i2c_i801"
    - "blacklist snd_hda_intel"
    - "blacklist snd_soc_skl"
  options:
    - "options i915 enable_guc=-1"
    - "options iwlwifi power_save=1"
    - "options iwlmvm power_scheme=3"
    - "options thinkpad_acpi experimental=1"

env_vars:
  - "LIBVA_DRIVER_NAME=iHD"
  - "CLUTTER_BACKEND=wayland"
  - "QT_QPA_PLATFORM=wayland"
  - "SDL_VIDEODRIVER=wayland"
  - "MOZ_ENABLE_WAYLAND=1"

install:
  grub:
  power:
  sysctl:
  udev:
  resolved:
  dotfiles:
  ssh_config:
  wireguard:
  gnome:
  nextdns_client:
  flexo_client:
  extra_packages:
  flatpak_packages:

extra_packages:
  - acpi_call

wireguard:
  ultraviolet:
    private_key: !vault |
            $ANSIBLE_VAULT;1.1;AES256
            35373835383962386230643039623066393538326661313135616533363134383533326266303062
            3530396664356463653637346464346439613830633065610a633433356133373935396562353666
            65616437386432366533323062626639333437383336313261346166353439653036363266353539
            3264343433383063320a396333343233366465333564666330343236653435636137626634313062
            63656231343439623764373064353762653533393934326164343561643162653565613631326264
            3866643765646638326566623633383661316337656139633238
    public_key: eUPPDoioS9cOwek0JAgsNpCy6MK5Fhca916ue629UTM=