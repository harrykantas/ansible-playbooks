cpu: intel

kernel:
  params: "msr.allow_writes=on intremap=no_x2apic_optout pci=realloc intel_iommu=off"
  modules: "i915 intel_lpss_pci thinkpad_acpi"

fonts:
  vconsole: ter-i18n

modules:
  blacklist:
    - "blacklist ideapad_laptop"
    - "blacklist pcspkr"
    - "blacklist i2c_i801"
    - "blacklist snd_hda_intel"
    - "blacklist snd_soc_skl"
  options:
    - "options i915 enable_guc=-1"
    - "options iwlwifi power_save=1"
    - "options iwlmvm power_scheme=3"
    - "options thinkpad_acpi experimental=1"

env_vars:
  - "LIBVA_DRIVER_NAME=iHD"
  - "CLUTTER_BACKEND=wayland"
  - "QT_QPA_PLATFORM=wayland"
  - "SDL_VIDEODRIVER=wayland"
  - "MOZ_ENABLE_WAYLAND=1"
  - "MOZ_USE_XINPUT2=1"

install:
  grub:
  acpid:
  sysctl:
  udev:
  dotfiles:
  gnome:
  nextdns_client:
  extra_packages:
    - acpi_call